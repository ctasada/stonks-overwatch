{% load static %}
<!-- DEGIRO Settings Section -->
<div id="broker-degiro" class="broker-section">
    <div class="broker-header">
        <img src="{% static 'brokers/degiro.png' %}" alt="DEGIRO">
        <h4 class="mb-0">DEGIRO</h4>
    </div>

    <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="degiro-enabled"
               {% if degiro_config.enabled %}checked{% endif %}>
        <label class="form-check-label" for="degiro-enabled">
            Enabled
        </label>
    </div>

    <h6 class="fw-bold mt-4 mb-2">Credentials:</h6>
    <hr class="my-2">

    <div class="settings-form-group">
        <label for="degiro-username">Username</label>
        <input type="text" class="form-control" id="degiro-username"
               value="{% if degiro_config.credentials.username %}{{ degiro_config.credentials.username }}{% endif %}">
    </div>

    {% include 'components/password_field.html' with field_id='degiro-password' label='Password' value=degiro_config.credentials.password wrapper_class='settings-form-group' %}

    {% include 'components/password_field.html' with field_id='degiro-totp' label='TOTP Secret Key' value=degiro_config.credentials.totp_secret_key wrapper_class='settings-form-group' oninput="updateVerificationCode('degiro')" %}

    <div class="settings-form-group hidden" id="degiro-verification-container">
        <label>Verification Code</label>
        <div class="verification-code-container">
            <span class="verification-code" id="degiro-verification-code"></span>
            <div class="circular-progress-container">
                <svg class="circular-progress" viewBox="0 0 40 40">
                    <circle class="circular-progress-background" cx="20" cy="20" r="16"></circle>
                    <circle class="circular-progress-bar" id="degiro-verification-timer" cx="20" cy="20" r="16"></circle>
                </svg>
            </div>
        </div>
    </div>

    <hr class="my-3">

    <div class="settings-form-group">
        <label>Update Frequency</label>
        <div class="update-frequency-group">
            <input type="number" class="form-control update-frequency-input" id="degiro-update-frequency"
                   min="1" max="60" step="1"
                   value="{% if degiro_config.update_frequency %}{{ degiro_config.update_frequency }}{% else %}5{% endif %}">
            <span>minutes</span>
        </div>
        <small class="form-text text-muted">
            <i class="bi bi-info-circle" aria-hidden="true"></i>
            Recommended: 5-15 minutes for optimal API performance
        </small>
    </div>
</div>
