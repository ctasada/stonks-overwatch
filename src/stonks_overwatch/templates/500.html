{% load static %}
<!DOCTYPE html>
<html lang="en" data-appearance="{{ APPEARANCE|default:'auto' }}" data-bs-theme="{% if APPEARANCE == 'auto' %}auto{% else %}{{ APPEARANCE }}{% endif %}">
<head>
    <title>Stonks Overwatch - Server Error</title>
    {% include 'components/head_standalone.html' %}
    <!-- JavaScript Bundle with Popper -->
    <script src="{% static 'bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>

    <script src="{% static 'js/theme-manager.js' %}"></script>
</head>
<body class="min-vh-100 d-flex align-items-center justify-content-center error-page">
    <div class="container py-2">
        <div class="card rounded-4 shadow p-4 mx-auto error-card">
            <img class="d-block mx-auto mb-1" src="{% static 'stonks_overwatch-512.png' %}" alt="Stonks Overwatch" width="120" height="120" />

            <div class="row mb-1 align-items-center">
                <div class="col-6 text-end fs-1">⚠️</div>
                <div class="col-6 text-start fs-1">Error</div>
            </div>

            {% if exception_type %}
            <div class="bg-body-secondary rounded p-3 mb-2">
                <div class="row mb-2">
                    <div class="col-4 fw-semibold">Error Type:</div>
                    <div class="col-8 text-body-secondary">{{ exception_type }}</div>
                </div>
                {% if exception_message %}
                <div class="row mb-2">
                    <div class="col-4 fw-semibold">Error Message:</div>
                    <div class="col-8 text-body-secondary">
                        <code class="small">{{ exception_message|truncatechars:120 }}</code>
                    </div>
                </div>
                {% endif %}
                <div class="row">
                    <div class="col-4 fw-semibold">Timestamp:</div>
                    <div class="col-8 text-body-secondary" id="timestamp">{{ timestamp }}</div>
                </div>
            </div>
            {% endif %}

            {% if traceback %}
            <div class="alert alert-secondary mb-4">
                <strong>Technical Details:</strong>
                <div class="mt-2">
                    <code class="small code-block-scroll">{{ traceback }}</code>
                </div>
            </div>
            {% endif %}

            <div class="text-center">
                <p class="mb-1">If this problem persists, please contact our support team.</p>
                <p class="mb-1">We apologize for the inconvenience</p>
                <a href="{{ support_url }}" class="btn btn-primary px-4">
                    Report Issue <i class="bi bi-envelope"></i>
                </a>
                <p class="mb-0 mt-1 text-muted small">Error occurred at: <span id="timestamp-display">{{ timestamp }}</span></p>
            </div>

        </div>
    </div>
</body>
</html>
